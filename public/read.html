<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... Vos balises meta et title ... -->
</head>
<body>
    <h1>Lecture d'un Livre</h1>
    <div class="book-container">
        <div id="book-container" class="image-container">
            <!-- Pages (images) du livre seront affichées ici -->
        </div>
    </div>
    <div id="controls">
        <button id="prev-page">Page précédente</button>
        <span id="page-num">Page 1</span>
        <button id="next-page">Page suivante</button>
    </div>

    <script>
        const bookContainer = document.getElementById('book-container');
        const prevPageButton = document.getElementById('prev-page');
        const nextPageButton = document.getElementById('next-page');
        const pageNumElement = document.getElementById('page-num');
        const totalPages = 10; // Remplacez par le nombre total de pages de votre livre

        // Fonction pour afficher une page (image) du livre en communiquant avec le serveur
        function renderPage(pageNum) {
            // Récupérer l'ID du livre depuis les paramètres de l'URL
            const urlParams = new URLSearchParams(window.location.search);
            const bookId = urlParams.get('book');

            // Faire une requête AJAX pour récupérer l'image de la page du serveur
            const xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    // L'image a été chargée avec succès
                    const pageContainer = document.createElement('div');
                    pageContainer.className = 'page-container';
                    bookContainer.innerHTML = '';
                    bookContainer.appendChild(pageContainer);

                    const imgElement = document.createElement('img');
                    imgElement.src = `/livre/${bookId}/${pageNum}`;
                    imgElement.className = 'image-container';
                    pageContainer.appendChild(imgElement);

                    pageNumElement.textContent = `Page ${pageNum}`;
                }
            };

            xhr.open('GET', `/livre/${bookId}/${pageNum}`, true);
            xhr.send();
        }

        // Récupérer l'ID du livre depuis les paramètres de l'URL et afficher la première page
        const urlParams = new URLSearchParams(window.location.search);
        const initialPage = parseInt(urlParams.get('page')) || 1; // Page par défaut est 1
        renderPage(initialPage);

        // Navigation par page précédente
        prevPageButton.addEventListener('click', function() {
            const currentPage = parseInt(pageNumElement.textContent.split(' ')[1]);
            if (currentPage > 1) {
                renderPage(currentPage - 1);
            }
        });

        // Navigation par page suivante
        nextPageButton.addEventListener('click', function() {
            const currentPage = parseInt(pageNumElement.textContent.split(' ')[1]);
            if (currentPage < totalPages) {
                renderPage(currentPage + 1);
            }
        });
    </script>
</body>
</html>
