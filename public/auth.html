<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Inscription / Connexion</title>
    <link rel="stylesheet" href="Semantic-UI-CSS-master/semantic.min.css">
    <style>
        /* CSS pour personnaliser la mise en page */
        body {
            background-color: #f0f0f0;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .ui.menu {
            border-radius: 0;
            margin: 0;
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: #fff;
            border-top: 1px solid #ddd;
        }
        .ui.menu .item {
            text-align: center;
            padding: 10px 0;
            width: 33.33%;
            border: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .ui.menu .item i {
            font-size: 24px;
        }

        .form {
            display: none; /* Masquer le formulaire par défaut */
        }
    </style>
</head>
<body>
    <div class="ui container">
        <h1>Inscription / Connexion</h1>

        <!-- Bouton de bascule entre Connexion et Inscription -->
        <div class="ui buttons">
            <button class="ui button" id="signup-button">Inscription</button>
            <div class="or"></div>
            <button class="ui button" id="login-button">Connexion</button>
        </div>

        <!-- Formulaire d'inscription -->
       <!-- ... (Partie HTML non modifiée) -->

<!-- Formulaire d'inscription -->
<form id="signup-form" class="ui form" action="/register" method="POST" enctype="multipart/form-data">
    <div class="field">
        <label for="email">Adresse e-mail:</label>
        <input type="email" name="email" required>
    </div>
    <div class="field">
        <label for="password">Mot de passe:</label>
        <input type="password" name="password" required>
    </div>
    <div class="field">
        <label for="confirmPassword">Confirmer le mot de passe:</label>
        <input type="password" name="confirmPassword" required>
    </div>
    <div class="field">
        <label for="username">Nom d'utilisateur:</label>
        <input type="text" name="username" required>
    </div>
    <div class="field">
        <label for="profilePic">Photo de profil</label>
        <input type="file" id="profilePic" name="profilePic" accept=".jpg, .jpeg, .png">
      </div>
    <div class="field">
        <label for="subscription">S'abonner :</label>
        <input type="checkbox" name="subscription" id="subscription">
    </div>
    <button class="ui primary button" type="submit">S'inscrire</button>
</form>

<!-- ... (Partie HTML non modifiée) -->


 <!-- Formulaire de connexion -->
 <form id="login-form" class="ui form">
    <div class="field">
        <label for="email">Adresse e-mail:</label>
        <input type="email" name="email" required>
    </div>
    <div class="field">
        <label for="password">Mot de passe:</label>
        <input type="password" name="password" required>
    </div>
    <!-- Ajoutez cet élément pour afficher les messages d'erreur -->
    <div id="login-error" style="color: red;"></div>
    <button class="ui primary button" type="submit">Se connecter</button>
</form>







    <!-- Barre de navigation en bas -->
    <div class="ui menu">
        <a href="index.html" class="item">
            <i class="home icon"></i>
            Accueil
        </a>
        <a href="BD.html
        " class="item">
            <i class="book icon"></i>
            Livres
        </a>
        <a href="profile.html" class="item">
            <i class="user icon"></i>
            Profil
        </a>
    </div>

<script>
    // JavaScript pour gérer la soumission du formulaire de connexion
    document.addEventListener('DOMContentLoaded', function () {
        const loginForm = document.getElementById('login-form');
        const loginError = document.getElementById('login-error'); // Élément pour afficher les messages d'erreur

        loginForm.addEventListener('submit', function (e) {
            e.preventDefault(); // Empêche le formulaire de se soumettre normalement

            // Récupérez les valeurs des champs de formulaire
            const email = loginForm.querySelector('input[name="email"]').value;
            const password = loginForm.querySelector('input[name="password"]').value;

            // Envoyez une requête POST au serveur pour la connexion
            fetch('/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email,
                    password
                })
            })
            .then((response) => {
                if (response.ok) {
                    // Rediriger vers la page de profil après une connexion réussie
                    window.location.href = '/profile.html';
                } else {
                    // Afficher un message d'erreur en cas d'échec de la connexion
                    loginError.textContent = 'Adresse e-mail ou mot de passe incorrect.';
                }
            })
            .catch((error) => {
                console.error('Erreur lors de la connexion :', error);
            });
        });
    });
</script>




    <!-- JavaScript pour basculer entre les formulaires -->
  <!-- JavaScript pour gérer la soumission du formulaire -->
<script>
    const signupButton = document.getElementById('signup-button');
    const loginButton = document.getElementById('login-button');
    const signupForm = document.getElementById('signup-form');
    const loginForm = document.getElementById('login-form');

    // Afficher le formulaire d'inscription au chargement de la page
    signupForm.style.display = 'block';
    loginForm.style.display = 'none';

    // Afficher le formulaire d'inscription lors du clic sur "Inscription"
    signupButton.addEventListener('click', function() {
        signupForm.style.display = 'block';
        loginForm.style.display = 'none';
    });

    // Afficher le formulaire de connexion lors du clic sur "Connexion"
    loginButton.addEventListener('click', function() {
        signupForm.style.display = 'none';
        loginForm.style.display = 'block';
    });

   
</script>

</body>
</html>
